import{r as c,a,j as r,F as Ae}from"./index-d9b07c51.js";import{a as ge}from"./apiClient-df69f537.js";import{p as Le}from"./resumeApi-09742daf.js";const L={name:"Candidate",skills:[],education:"",certifications:[],projects:[],experience_years:0,role_target:"Software Engineer"},Ie=[{id:"ml-1",title:"Machine Learning Engineer",company:"Antal International",location:"Hyderabad",salary:"INR 15-20 LPA",exp:"2-5 yrs",keywords:["machine learning","python","tensorflow","nlp","deep learning"],platform:"naukri",naukriUrl:"https://www.naukri.com/machine-learning-engineer-jobs-in-hyderabad",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=Machine+Learning+Engineer&location=Hyderabad%2C+Telangana%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/hyderabad-machine-learning-engineer-jobs-SRCH_IL.0,9_IC2937408_KO10,35.htm"},{id:"ds-1",title:"Data Scientist (NLP)",company:"Jio Platforms",location:"Mumbai",salary:"INR 12-18 LPA",exp:"2-5 yrs",keywords:["data science","python","nlp","sql","scikit-learn"],platform:"linkedin",naukriUrl:"https://www.naukri.com/data-scientist-jobs-in-mumbai?k=data+scientist+nlp",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=Data+Scientist+NLP&location=Mumbai%2C+Maharashtra%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/mumbai-data-scientist-jobs-SRCH_IL.0,6_IC2940912_KO7,21.htm"},{id:"fs-1",title:"Full Stack Developer",company:"Razorpay",location:"Bengaluru",salary:"INR 16-25 LPA",exp:"2-5 yrs",keywords:["react","node.js","javascript","typescript","sql"],platform:"naukri",naukriUrl:"https://www.naukri.com/full-stack-developer-jobs-in-bengaluru-bangalore?k=full+stack+developer",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=Full+Stack+Developer&location=Bengaluru%2C+Karnataka%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/bengaluru-full-stack-developer-jobs-SRCH_IL.0,9_IC2940587_KO10,30.htm"},{id:"be-1",title:"Backend Developer",company:"PhonePe",location:"Bengaluru",salary:"INR 14-22 LPA",exp:"2-6 yrs",keywords:["node.js","express.js","mongodb","api","sql"],platform:"naukri",naukriUrl:"https://www.naukri.com/backend-developer-jobs-in-bengaluru-bangalore?k=backend+developer",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=Backend+Developer&location=Bengaluru%2C+Karnataka%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/bengaluru-backend-developer-jobs-SRCH_IL.0,9_IC2940587_KO10,27.htm"},{id:"devops-1",title:"DevOps Engineer",company:"Infosys",location:"Pune",salary:"INR 11-18 LPA",exp:"3-6 yrs",keywords:["aws","docker","kubernetes","ci/cd","linux"],platform:"linkedin",naukriUrl:"https://www.naukri.com/devops-engineer-jobs-in-pune",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=DevOps+Engineer&location=Pune%2C+Maharashtra%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/pune-devops-engineer-jobs-SRCH_IL.0,4_IC2856202_KO5,21.htm"},{id:"an-1",title:"Senior Data Analyst",company:"Ola Electric",location:"Bengaluru",salary:"INR 12-18 LPA",exp:"3-6 yrs",keywords:["data analysis","sql","python","tableau","reporting"],platform:"naukri",naukriUrl:"https://www.naukri.com/senior-data-analyst-jobs-in-bengaluru-bangalore?k=senior+data+analyst",linkedinUrl:"https://www.linkedin.com/jobs/search/?keywords=Senior+Data+Analyst&location=Bengaluru%2C+Karnataka%2C+India",glassdoorUrl:"https://www.glassdoor.co.in/Job/bengaluru-senior-data-analyst-jobs-SRCH_IL.0,9_IC2940587_KO10,29.htm"}],he={naukri:{label:"Naukri",color:"#f05537"},linkedin:{label:"LinkedIn",color:"#0a66c2"},glassdoor:{label:"Glassdoor",color:"#0f9b57"}};function _e(s,t,i){return Math.max(t,Math.min(i,s))}function G(s){return Array.isArray(s)?s.map(t=>String(t||"").trim()).filter(Boolean):[]}function Te(s){const t={...L,...s||{}},i=Number(t.experience_years);return{...t,name:String(t.name||L.name).trim()||L.name,role_target:String(t.role_target||L.role_target).trim()||L.role_target,skills:G(t.skills),certifications:G(t.certifications),projects:G(t.projects),education:String(t.education||"").trim(),experience_years:Number.isFinite(i)?Math.max(0,i):0}}function Me(s,t){const i=t.role_target.toLowerCase(),g=t.skills.map(p=>p.toLowerCase()),h=t.certifications.map(p=>p.toLowerCase()),k=t.projects.map(p=>p.toLowerCase()),m=`${s.title} ${s.keywords.join(" ")}`.toLowerCase();let S=35;for(const p of g)p&&m.includes(p)&&(S+=6);for(const p of h){const _=p.split(/\s+/)[0];_&&m.includes(_)&&(S+=2)}for(const p of k){const _=p.split(/\s+/)[0];_&&m.includes(_)&&(S+=1)}return i&&m.includes(i.split(/\s+/)[0])&&(S+=8),S+=_e(t.experience_years,0,8),_e(Math.round(S),20,98)}function Be(s){return s>=75?{label:"Highly Ready",color:"#00e5a0"}:s>=50?{label:"Moderately Ready",color:"#f5c518"}:{label:"Needs Prep",color:"#ff4e6a"}}function De(s){return Ie.map(t=>({...t,matchScore:Me(t,s),primaryUrl:t.platform==="linkedin"?t.linkedinUrl:t.platform==="glassdoor"?t.glassdoorUrl:t.naukriUrl})).sort((t,i)=>i.matchScore-t.matchScore)}function Fe(s){return s>=75?"high":s>=50?"mid":"low"}function ze(s){return s>=75?"#00e5a0":s>=50?"#f5c518":"#ff4e6a"}function Ee({score:s}){const t=ze(s);return a("div",{style:l.meterWrap,children:[r("div",{style:l.meterTrack,children:r("div",{style:{...l.meterFill,width:`${s}%`,backgroundColor:t}})}),a("p",{style:{...l.meterLabel,color:t},children:[s,"% match"]})]})}function je({job:s}){const t=Be(s.matchScore),i=he[s.platform]||he.naukri;return a("article",{style:l.card,children:[a("div",{style:l.cardTopRow,children:[r("span",{style:{...l.platformBadge,borderColor:`${i.color}66`,color:i.color},children:i.label}),a("span",{style:l.scoreBadge,children:[s.matchScore,"%"]})]}),r("h3",{style:l.cardTitle,children:s.title}),r("p",{style:l.cardCompany,children:s.company}),a("p",{style:l.cardMeta,children:[s.location," | ",s.exp]}),r("p",{style:l.cardSalary,children:s.salary}),r(Ee,{score:s.matchScore}),r("div",{style:{...l.readyBadge,color:t.color,borderColor:`${t.color}4d`},children:t.label}),a("div",{style:l.linkGrid,children:[r("a",{href:s.naukriUrl,target:"_blank",rel:"noreferrer",style:l.linkBtn,children:"Naukri Apply"}),r("a",{href:s.linkedinUrl,target:"_blank",rel:"noreferrer",style:l.linkBtn,children:"LinkedIn Apply"}),r("a",{href:s.glassdoorUrl,target:"_blank",rel:"noreferrer",style:l.linkBtn,children:"Glassdoor Apply"})]}),r("a",{href:s.primaryUrl,target:"_blank",rel:"noreferrer",style:l.primaryApply,children:"Apply Now"})]})}function $e({resume:s=L}){const t=c.useMemo(()=>Te(s),[s]),[i,g]=c.useState([]),[h,k]=c.useState(""),[m,S]=c.useState("all");c.useEffect(()=>{g(De(t))},[t]);const p=c.useMemo(()=>{const o=h.toLowerCase().trim();return i.filter(b=>{const w=m==="all"?!0:Fe(b.matchScore)===m,C=o.length===0?!0:`${b.title} ${b.company} ${b.location}`.toLowerCase().includes(o);return w&&C})},[i,h,m]),_=i.length===0?0:Math.round(i.reduce((o,b)=>o+b.matchScore,0)/i.length);return a("section",{style:l.root,children:[r("style",{children:Pe}),a("header",{style:l.header,children:[r("p",{style:l.kicker,children:"AI JOB MATCHING"}),r("h2",{style:l.heading,children:"Matched Opportunities"}),a("p",{style:l.subheading,children:["Showing role-fit jobs for ",r("strong",{children:t.name})," targeting"," ",r("strong",{children:t.role_target}),"."]})]}),a("div",{style:l.summaryRow,children:[a("div",{style:l.summaryItem,children:[r("span",{style:l.summaryValue,children:i.length}),r("span",{style:l.summaryLabel,children:"Jobs Found"})]}),a("div",{style:l.summaryItem,children:[a("span",{style:l.summaryValue,children:[_,"%"]}),r("span",{style:l.summaryLabel,children:"Avg Match"})]}),a("div",{style:l.summaryItem,children:[r("span",{style:l.summaryValue,children:t.experience_years}),r("span",{style:l.summaryLabel,children:"Years Exp"})]})]}),a("div",{style:l.controls,children:[r("input",{type:"text",value:h,onChange:o=>k(o.target.value),placeholder:"Search role, company, city",style:l.searchInput}),r("div",{style:l.filterRow,children:[["all","All"],["high","75%+"],["mid","50-74%"],["low","<50%"]].map(([o,b])=>r("button",{type:"button",onClick:()=>S(o),style:{...l.filterBtn,...m===o?l.filterBtnActive:{}},children:b},o))})]}),p.length===0?r("div",{style:l.emptyState,children:"No jobs matched this filter. Try changing search or score band."}):r("div",{style:l.grid,children:p.map(o=>r(je,{job:o},o.id))})]})}const Pe=`
  @import url('https://fonts.googleapis.com/css2?family=Syne:wght@500;700;800&family=DM+Sans:wght@400;500;700&display=swap');
`,l={root:{width:"100%",backgroundColor:"#090d16",border:"1px solid #173040",borderRadius:"18px",padding:"24px",color:"#e8ecf3",fontFamily:"'DM Sans', sans-serif",boxShadow:"0 24px 48px rgba(0, 0, 0, 0.35)"},header:{marginBottom:"18px"},kicker:{color:"#00e5a0",letterSpacing:"0.16em",fontSize:"11px",fontWeight:700,marginBottom:"8px"},heading:{margin:0,fontSize:"clamp(24px, 4vw, 32px)",fontFamily:"'Syne', sans-serif",lineHeight:1.15},subheading:{marginTop:"8px",color:"#9ea9bc",lineHeight:1.6},summaryRow:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"10px",marginBottom:"16px"},summaryItem:{backgroundColor:"#0f1623",border:"1px solid #1a2d40",borderRadius:"12px",padding:"12px"},summaryValue:{display:"block",fontSize:"24px",fontWeight:700,color:"#00e5a0",fontFamily:"'Syne', sans-serif"},summaryLabel:{color:"#8a94a7",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.08em"},controls:{display:"grid",gap:"10px",marginBottom:"16px"},searchInput:{width:"100%",border:"1px solid #1d3345",borderRadius:"10px",backgroundColor:"#0c1420",color:"#e8ecf3",padding:"11px 12px",outline:"none",fontSize:"14px",fontFamily:"'DM Sans', sans-serif"},filterRow:{display:"flex",gap:"8px",flexWrap:"wrap"},filterBtn:{border:"1px solid #2a3f4f",borderRadius:"999px",backgroundColor:"#0d1521",color:"#93a2b6",padding:"7px 12px",cursor:"pointer",fontFamily:"'DM Sans', sans-serif",fontSize:"12px"},filterBtnActive:{color:"#00e5a0",borderColor:"#00e5a0",backgroundColor:"#00e5a014"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(260px, 1fr))",gap:"14px"},card:{backgroundColor:"#0d1521",border:"1px solid #1f3243",borderRadius:"14px",padding:"14px",display:"flex",flexDirection:"column",gap:"8px"},cardTopRow:{display:"flex",alignItems:"center",justifyContent:"space-between"},platformBadge:{fontSize:"11px",border:"1px solid",borderRadius:"999px",padding:"4px 8px"},scoreBadge:{color:"#00e5a0",fontWeight:700,fontSize:"14px"},cardTitle:{margin:0,fontFamily:"'Syne', sans-serif",fontSize:"18px",lineHeight:1.2},cardCompany:{margin:0,color:"#d1d7e2",fontWeight:500},cardMeta:{margin:0,color:"#94a0b4",fontSize:"13px"},cardSalary:{margin:0,color:"#00e5a0",fontSize:"13px"},meterWrap:{marginTop:"2px"},meterTrack:{width:"100%",height:"6px",backgroundColor:"#1f3344",borderRadius:"999px",overflow:"hidden"},meterFill:{height:"100%",borderRadius:"999px",transition:"width 0.35s ease"},meterLabel:{margin:"5px 0 0",fontSize:"12px",fontWeight:700},readyBadge:{alignSelf:"flex-start",border:"1px solid",borderRadius:"999px",padding:"4px 9px",fontSize:"11px",fontWeight:700},linkGrid:{marginTop:"4px",display:"grid",gridTemplateColumns:"repeat(3, minmax(0, 1fr))",gap:"6px"},linkBtn:{border:"1px solid #2c4152",borderRadius:"8px",backgroundColor:"#0a111b",color:"#9eb0c4",fontSize:"11px",textAlign:"center",textDecoration:"none",padding:"7px 6px"},primaryApply:{marginTop:"6px",textAlign:"center",borderRadius:"9px",background:"linear-gradient(90deg, #00e5a0, #00b4d8)",color:"#041017",textDecoration:"none",fontFamily:"'Syne', sans-serif",fontWeight:700,padding:"10px 10px"},emptyState:{border:"1px dashed #2b4153",borderRadius:"12px",textAlign:"center",color:"#92a2b7",padding:"24px"}},V=ge.create({baseURL:"http://127.0.0.1:8000"});V.interceptors.response.use(s=>s.data,s=>Promise.reject(s));const Ue=async s=>{const t=new FormData;for(const i of s)t.append("resumes",i);return V.post("/upload-resumes",t)},Je=async({jobDescription:s,resumeIds:t})=>V.post("/match",{job_description:s,resume_ids:t}),ye=ge.create({baseURL:"http://127.0.0.1:8000"});ye.interceptors.response.use(s=>s.data,s=>{var t;return console.error("ML Service Error:",((t=s.response)==null?void 0:t.data)||s.message),Promise.reject(s)});const Oe=async(s,t={})=>{const i=new FormData;return i.append("file",s),t.jobDescription&&i.append("job_description",t.jobDescription),t.location&&i.append("location",t.location),typeof t.remote=="boolean"&&i.append("remote",String(t.remote)),ye.post("/predict",i,{headers:{"Content-Type":"multipart/form-data"}})},He="_container_rs4oh_3",We="_embedded_rs4oh_13",Ge="_content_rs4oh_19",Ve="_header_rs4oh_27",qe="_kicker_rs4oh_35",Ke="_title_rs4oh_44",Ye="_subtitle_rs4oh_52",Xe="_headerActions_rs4oh_59",Qe="_stepper_rs4oh_66",Ze="_stepItem_rs4oh_77",et="_stepIndex_rs4oh_85",tt="_stepLabel_rs4oh_101",rt="_complete_rs4oh_110",st="_current_rs4oh_116",nt="_panel_rs4oh_123",at="_fadeSlide_rs4oh_131",it="_fadeSlideIn_rs4oh_1",ot="_panelTitle_rs4oh_135",lt="_dropzone_rs4oh_142",ct="_dropzoneActive_rs4oh_151",dt="_fileInput_rs4oh_157",pt="_dropTitle_rs4oh_161",ut="_dropHint_rs4oh_168",mt="_primaryButton_rs4oh_174",ht="_fileInfo_rs4oh_189",_t="_analyzeButton_rs4oh_195",ft="_queryGrid_rs4oh_213",gt="_checkboxRow_rs4oh_219",yt="_checkboxInput_rs4oh_232",bt="_loadingState_rs4oh_236",kt="_spinner_rs4oh_249",St="_spin_rs4oh_249",xt="_error_rs4oh_258",Nt="_resultGrid_rs4oh_268",wt="_resultCard_rs4oh_274",Ct="_resultLabel_rs4oh_281",vt="_resultValue_rs4oh_290",Rt="_confidenceWrap_rs4oh_297",At="_confidenceHeader_rs4oh_305",Lt="_confidenceTrack_rs4oh_318",It="_confidenceFill_rs4oh_326",Tt="_skillsSection_rs4oh_333",Mt="_chipList_rs4oh_337",Bt="_skillChip_rs4oh_344",Dt="_removeChip_rs4oh_357",Ft="_skillInputRow_rs4oh_367",zt="_textInput_rs4oh_374",Et="_secondaryButton_rs4oh_390",jt="_listGrid_rs4oh_406",$t="_listCard_rs4oh_413",Pt="_list_rs4oh_406",Ut="_emptyText_rs4oh_428",Jt="_matchingButton_rs4oh_434",Ot="_atsSection_rs4oh_447",Ht="_jobTextarea_rs4oh_455",Wt="_atsActions_rs4oh_474",Gt="_atsResultList_rs4oh_481",Vt="_atsResultCard_rs4oh_488",qt="_atsTopRow_rs4oh_495",Kt="_atsRank_rs4oh_504",Yt="_atsMeta_rs4oh_512",Xt="_atsSkillWrap_rs4oh_519",Qt="_missingSkillChip_rs4oh_523",Zt="_jobsSection_rs4oh_536",er="_jobsGrid_rs4oh_544",tr="_jobCard_rs4oh_551",rr="_jobHeader_rs4oh_558",sr="_jobTitle_rs4oh_565",nr="_jobCompany_rs4oh_573",ar="_jobMeta_rs4oh_580",ir="_jobDescription_rs4oh_587",or="_jobActions_rs4oh_594",lr="_jobApplyButton_rs4oh_598",e={container:He,embedded:We,content:Ge,header:Ve,kicker:qe,title:Ke,subtitle:Ye,headerActions:Xe,stepper:Qe,stepItem:Ze,stepIndex:et,stepLabel:tt,complete:rt,current:st,panel:nt,fadeSlide:at,fadeSlideIn:it,panelTitle:ot,dropzone:lt,dropzoneActive:ct,fileInput:dt,dropTitle:pt,dropHint:ut,primaryButton:mt,fileInfo:ht,analyzeButton:_t,queryGrid:ft,checkboxRow:gt,checkboxInput:yt,loadingState:bt,spinner:kt,spin:St,error:xt,resultGrid:Nt,resultCard:wt,resultLabel:Ct,resultValue:vt,confidenceWrap:Rt,confidenceHeader:At,confidenceTrack:Lt,confidenceFill:It,skillsSection:Tt,chipList:Mt,skillChip:Bt,removeChip:Dt,skillInputRow:Ft,textInput:zt,secondaryButton:Et,listGrid:jt,listCard:$t,list:Pt,emptyText:Ut,matchingButton:Jt,atsSection:Ot,jobTextarea:Ht,atsActions:Wt,atsResultList:Gt,atsResultCard:Vt,atsTopRow:qt,atsRank:Kt,atsMeta:Yt,atsSkillWrap:Xt,missingSkillChip:Qt,jobsSection:Zt,jobsGrid:er,jobCard:tr,jobHeader:rr,jobTitle:sr,jobCompany:nr,jobMeta:ar,jobDescription:ir,jobActions:or,jobApplyButton:lr},cr=10*1024*1024,dr=[".pdf",".doc",".docx"],pr=[{id:1,label:"Upload Resume"},{id:2,label:"Prediction Results"},{id:3,label:"Job Matching"}];function E(s,t,i){return Math.max(t,Math.min(i,s))}function x(s){return Array.isArray(s)?s.map(t=>String(t||"").trim()).filter(Boolean):[]}function be(s,t=220){const i=String(s||"").trim();return i.length<=t?i:`${i.slice(0,t).trim()}...`}function fe(s){return Array.isArray(s)?s.map((t,i)=>({id:String((t==null?void 0:t.id)||(t==null?void 0:t.apply_link)||`${i}`),title:String((t==null?void 0:t.title)||"Untitled role").trim(),company:String((t==null?void 0:t.company)||"Unknown company").trim(),location:String((t==null?void 0:t.location)||"Location not specified").trim(),description:be((t==null?void 0:t.description)||"",240),apply_link:String((t==null?void 0:t.apply_link)||"").trim(),posted_date:String((t==null?void 0:t.posted_date)||"").trim(),is_remote:!!(t!=null&&t.is_remote),employment_type:String((t==null?void 0:t.employment_type)||"").trim()})).filter(t=>t.title):[]}function ur(s){if(!s||typeof s!="object")return null;if(s.career_path){const h=Number(s.confidence),k=Number.isFinite(h)&&h>1?E(h/100,0,1):E(h||0,0,1),m=Number(s.required_experience||0);return{name:"Resume Candidate",skills:x(s.extracted_skills||s.required_skills||[]),education:String(s.required_education||"").trim(),certifications:x(s.certifications||[]),projects:x(s.projects||[]),experience_years:Number.isFinite(m)?Math.max(0,m):0,predicted_role:String(s.career_path||"").trim(),confidence:k,ats_score:Number(s.ats_score||0),predicted_category:String(s.predicted_category||"").trim(),job_description_used:String(s.job_description_used||"").trim(),missing_skills:x(s.missing_skills||[]),jobs:fe(s.jobs)}}const t=Number(s.confidence),i=Number.isFinite(t)&&t>1?E(t/100,0,1):E(t||0,0,1),g=Number(s.experience_years);return{name:String(s.name||"").trim(),skills:x(s.skills),education:String(s.education||"").trim(),certifications:x(s.certifications),projects:x(s.projects),experience_years:Number.isFinite(g)?Math.max(0,g):0,predicted_role:String(s.predicted_role||"").trim(),confidence:i,ats_score:Number(s.ats_score||0),predicted_category:String(s.predicted_category||"").trim(),job_description_used:String(s.job_description_used||"").trim(),missing_skills:x(s.missing_skills),jobs:fe(s.jobs)}}function mr(s){const t=Number(s);if(!Number.isFinite(t)||t<0)return"0 B";if(t<1024)return`${t} B`;const i=t/1024;return i<1024?`${i.toFixed(1)} KB`:`${(i/1024).toFixed(2)} MB`}function hr(s,t){const i=String((s==null?void 0:s.predicted_role)||"").trim()||"Software Engineer",g=Number((s==null?void 0:s.experience_years)||0),h=x(t).slice(0,12),k=h.length?h.join(", "):"software development, problem solving, API development";return[`Hiring for ${i}.`,`Required skills: ${k}.`,g>0?`Preferred experience: around ${g} years.`:"Experience: 0-5 years.","Must be able to build production-ready solutions and collaborate with cross-functional teams."].join(" ")}const yr=({embedded:s=!1})=>{var le,ce;const t=c.useRef(null),[i,g]=c.useState(null),[h,k]=c.useState(1),[m,S]=c.useState(!1),[p,_]=c.useState(""),[o,b]=c.useState(null),[w,C]=c.useState([]),[q,j]=c.useState(""),[$,T]=c.useState(!1),[P,ke]=c.useState(null),[Se,M]=c.useState(!1),[B,R]=c.useState(!1),[K,Y]=c.useState(""),[X,Q]=c.useState(""),[Z,ee]=c.useState(!0),[U,J]=c.useState(""),[D,O]=c.useState([]),[te,H]=c.useState(!1),[re,A]=c.useState(""),[se,W]=c.useState([]);c.useEffect(()=>{if(!o){C([]);return}C(x(o.skills))},[o]),c.useEffect(()=>{if($){k(3);return}if(m||o||B&&p){k(2);return}k(1)},[B,m,o,$,p]);const ne=c.useMemo(()=>o?{name:o.name||"Candidate",skills:w,education:o.education,certifications:o.certifications,projects:o.projects,experience_years:o.experience_years,role_target:o.predicted_role||"Software Engineer"}:null,[w,o]),ae=n=>{if(!n)return"Please choose a resume file.";const d=n.name.toLowerCase();return dr.some(u=>d.endsWith(u))?n.size>cr?"File too large. Maximum supported size is 10MB.":"":"Only PDF, DOC, and DOCX files are supported."},ie=n=>{const d=ae(n);if(d){_(d),g(null),R(!1);return}_(""),R(!1),g(n)},xe=async()=>{var d,y;const n=ae(i);if(n){_(n),R(!1);return}R(!0),_(""),S(!0),T(!1);try{let u;const I={jobDescription:K.trim(),location:X.trim(),remote:Z};try{u=await Oe(i,I),console.log("ML Service response:",u)}catch(F){console.log("ML Service failed, trying backend...",F.message),u=await Le(i)}const N=ur(u);if(!N)throw new Error("Prediction API returned an invalid response.");b(N),ke(N),A(""),W([]),O([]),!U&&N.job_description_used&&J(N.job_description_used)}catch(u){const I=((y=(d=u==null?void 0:u.response)==null?void 0:d.data)==null?void 0:y.message)||u.message||"Unable to analyze this resume right now.";_(I)}finally{S(!1)}},Ne=n=>{C(d=>d.filter(y=>y!==n))},oe=()=>{const n=q.trim();n&&(C(d=>d.some(u=>u.toLowerCase()===n.toLowerCase())?d:[...d,n]),j(""))},we=()=>{g(null),b(null),T(!1),C([]),j(""),_(""),R(!1),Y(""),Q(""),ee(!0),J(""),O([]),H(!1),A(""),W([]),t.current&&(t.current.value="")},Ce=()=>{P&&(b(P),_(""),T(!1),R(!0))},ve=async()=>{var N,F,de,pe,ue;const d=U.trim()||hr(o,w);if(!i&&D.length===0){A("Upload at least one resume file before running ATS match.");return}const y=[i,...D].filter(Boolean),u=new Map;for(const f of y){const v=`${f.name}-${f.size}`;u.has(v)||u.set(v,f)}const I=Array.from(u.values());H(!0),A("");try{const f=await Ue(I),v=((N=f==null?void 0:f.resumes)==null?void 0:N.map(Re=>Re.resume_id).filter(Boolean))||[];if(v.length===0)throw new Error("ATS upload succeeded but no resume IDs were returned.");const z=await Je({jobDescription:d,resumeIds:v}),me=Array.isArray(z==null?void 0:z.results)?z.results:[];W(me),me.length===0&&A("No ATS results returned for the uploaded resumes.")}catch(f){const v=((de=(F=f==null?void 0:f.response)==null?void 0:F.data)==null?void 0:de.detail)||((ue=(pe=f==null?void 0:f.response)==null?void 0:pe.data)==null?void 0:ue.message)||f.message||"ATS engine request failed.";A(v)}finally{H(!1)}};return r("div",{className:`${e.container} ${s?e.embedded:""}`,children:a("div",{className:e.content,children:[a("header",{className:e.header,children:[r("p",{className:e.kicker,children:"RESUME TO JOB PIPELINE"}),r("h1",{className:e.title,children:"Analyze Resume and Find Matching Jobs"}),r("p",{className:e.subtitle,children:"Upload your resume, review extracted profile data, then jump straight into role-based job opportunities."}),a("div",{className:e.headerActions,children:[r("button",{type:"button",className:e.secondaryButton,onClick:we,children:"Re-upload"}),P&&!o&&r("button",{type:"button",className:e.secondaryButton,onClick:Ce,children:"Restore Last Result"})]})]}),r("div",{className:e.stepper,children:pr.map(n=>{const d=h>n.id,y=h===n.id;return a("div",{className:e.stepItem,children:[r("div",{className:`${e.stepIndex} ${d?e.complete:""} ${y?e.current:""}`,children:n.id}),r("span",{className:e.stepLabel,children:n.label})]},n.id)})}),a("section",{className:`${e.panel} ${e.fadeSlide}`,children:[r("h2",{className:e.panelTitle,children:"Step 1 - Upload Resume"}),a("div",{className:`${e.dropzone} ${Se?e.dropzoneActive:""}`,onDragEnter:n=>{n.preventDefault(),M(!0)},onDragOver:n=>{n.preventDefault(),M(!0)},onDragLeave:n=>{n.preventDefault(),M(!1)},onDrop:n=>{var d;n.preventDefault(),M(!1),ie((d=n.dataTransfer.files)==null?void 0:d[0])},children:[r("input",{ref:t,id:"resume-input",type:"file",accept:".pdf,.doc,.docx",className:e.fileInput,onChange:n=>{var d;return ie((d=n.target.files)==null?void 0:d[0])}}),r("p",{className:e.dropTitle,children:"Drag and drop your PDF or DOCX here"}),r("p",{className:e.dropHint,children:"or click below to browse files"}),r("label",{htmlFor:"resume-input",className:e.primaryButton,children:"Choose Resume"}),i&&a("p",{className:e.fileInfo,children:[i.name," (",mr(i.size),")"]})]}),a("div",{className:e.queryGrid,children:[r("textarea",{value:K,onChange:n=>Y(n.target.value),placeholder:"Optional: paste a target job description for ATS score. If empty, auto JD is used.",className:e.jobTextarea}),a("div",{className:e.skillInputRow,children:[r("input",{value:X,onChange:n=>Q(n.target.value),placeholder:"Optional job location (e.g. San Francisco, CA)",className:e.textInput}),a("label",{className:e.checkboxRow,children:[r("input",{type:"checkbox",checked:Z,onChange:n=>ee(n.target.checked),className:e.checkboxInput}),"Remote-first jobs"]})]})]}),r("button",{type:"button",className:e.analyzeButton,onClick:xe,disabled:m||!i,children:m?"Analyzing Resume...":"Analyze Resume"}),p&&!B&&r("p",{className:e.error,children:p})]}),(m||o||B&&p)&&a("section",{className:`${e.panel} ${e.fadeSlide}`,children:[r("h2",{className:e.panelTitle,children:"Step 2 - Prediction Results"}),m&&a("div",{className:e.loadingState,children:[r("span",{className:e.spinner}),r("p",{children:"Running AI extraction and prediction..."})]}),!m&&p&&r("p",{className:e.error,children:p}),!m&&o&&a(Ae,{children:[a("div",{className:e.resultGrid,children:[a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"Name"}),r("p",{className:e.resultValue,children:o.name||"Not detected"})]}),a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"Education"}),r("p",{className:e.resultValue,children:o.education||"Not detected"})]}),a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"Experience"}),a("p",{className:e.resultValue,children:[o.experience_years," years"]})]}),a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"Predicted Role"}),r("p",{className:e.resultValue,children:o.predicted_role||"Not detected"})]}),a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"ATS Score"}),a("p",{className:e.resultValue,children:[Math.round(o.ats_score||0),"%"]})]}),a("div",{className:e.resultCard,children:[r("p",{className:e.resultLabel,children:"ATS Category"}),r("p",{className:e.resultValue,children:o.predicted_category||"Not detected"})]})]}),a("div",{className:e.confidenceWrap,children:[a("div",{className:e.confidenceHeader,children:[r("span",{children:"Prediction Confidence"}),a("strong",{children:[Math.round(o.confidence*100),"%"]})]}),r("div",{className:e.confidenceTrack,children:r("div",{className:e.confidenceFill,style:{width:`${Math.round(o.confidence*100)}%`}})})]}),a("div",{className:e.skillsSection,children:[r("p",{className:e.resultLabel,children:"Skills (editable)"}),a("div",{className:e.chipList,children:[w.length===0&&r("span",{className:e.emptyText,children:"No skills found yet."}),w.map(n=>a("span",{className:e.skillChip,children:[n,r("button",{type:"button",className:e.removeChip,onClick:()=>Ne(n),"aria-label":`Remove ${n}`,children:"x"})]},n))]}),a("div",{className:e.skillInputRow,children:[r("input",{value:q,onChange:n=>j(n.target.value),onKeyDown:n=>{n.key==="Enter"&&(n.preventDefault(),oe())},placeholder:"Add a skill",className:e.textInput}),r("button",{type:"button",className:e.secondaryButton,onClick:oe,children:"Add Skill"})]})]}),a("div",{className:e.listGrid,children:[a("div",{className:e.listCard,children:[r("p",{className:e.resultLabel,children:"Certifications"}),o.certifications.length===0?r("p",{className:e.emptyText,children:"No certifications detected."}):r("ul",{className:e.list,children:o.certifications.map(n=>r("li",{children:n},n))})]}),a("div",{className:e.listCard,children:[r("p",{className:e.resultLabel,children:"Projects"}),o.projects.length===0?r("p",{className:e.emptyText,children:"No projects detected."}):r("ul",{className:e.list,children:o.projects.map(n=>r("li",{children:n},n))})]})]}),a("div",{className:e.atsSection,children:[r("p",{className:e.resultLabel,children:"ATS Match (Python Model)"}),o.job_description_used&&a("p",{className:e.jobMeta,children:["Active JD: ",be(o.job_description_used,180)]}),r("p",{className:e.emptyText,children:"Job description is optional. ATS will auto-generate it from resume role and skills."}),((le=o.missing_skills)==null?void 0:le.length)>0&&a("div",{className:e.atsSkillWrap,children:[r("p",{className:e.resultLabel,children:"Missing Skills vs Current JD"}),r("div",{className:e.chipList,children:o.missing_skills.map(n=>r("span",{className:e.missingSkillChip,children:n},`predict-missing-${n}`))})]}),r("textarea",{value:U,onChange:n=>J(n.target.value),placeholder:"Optional: paste your own job description. Leave empty for auto mode.",className:e.jobTextarea}),a("div",{className:e.atsActions,children:[r("label",{htmlFor:"ats-files",className:e.secondaryButton,children:"Add More Resumes"}),r("input",{id:"ats-files",type:"file",accept:".pdf,.doc,.docx",multiple:!0,className:e.fileInput,onChange:n=>O(Array.from(n.target.files||[]))}),r("button",{type:"button",className:e.secondaryButton,onClick:ve,disabled:te,children:te?"Running ATS...":"Run ATS Match"})]}),D.length>0&&a("p",{className:e.fileInfo,children:[D.length," extra resume(s) selected for ranking."]}),re&&r("p",{className:e.error,children:re}),se.length>0&&r("div",{className:e.atsResultList,children:se.map(n=>{var d,y;return a("article",{className:e.atsResultCard,children:[a("div",{className:e.atsTopRow,children:[r("strong",{children:n.filename}),a("span",{className:e.atsRank,children:["Rank #",n.rank]})]}),a("p",{className:e.atsMeta,children:["ATS Score: ",n.ats_score,"% | Category: ",n.predicted_category]}),a("div",{className:e.atsSkillWrap,children:[r("p",{className:e.resultLabel,children:"Extracted Skills"}),r("div",{className:e.chipList,children:(d=n.extracted_skills)==null?void 0:d.map(u=>r("span",{className:e.skillChip,children:u},`${n.resume_id}-${u}`))})]}),a("div",{className:e.atsSkillWrap,children:[r("p",{className:e.resultLabel,children:"Missing Skills"}),r("div",{className:e.chipList,children:(y=n.missing_skills)!=null&&y.length?n.missing_skills.map(u=>r("span",{className:e.missingSkillChip,children:u},`${n.resume_id}-miss-${u}`)):r("span",{className:e.emptyText,children:"No critical missing skills detected."})})]})]},n.resume_id)})})]}),a("div",{className:e.jobsSection,children:[r("p",{className:e.resultLabel,children:"Live Job Vacancies (JSearch)"}),((ce=o.jobs)==null?void 0:ce.length)>0?r("div",{className:e.jobsGrid,children:o.jobs.map(n=>a("article",{className:e.jobCard,children:[a("div",{className:e.jobHeader,children:[r("h3",{className:e.jobTitle,children:n.title}),n.is_remote&&r("span",{className:e.atsRank,children:"Remote"})]}),r("p",{className:e.jobCompany,children:n.company}),a("p",{className:e.jobMeta,children:[n.location,n.employment_type?` | ${n.employment_type}`:""]}),n.description&&r("p",{className:e.jobDescription,children:n.description}),r("div",{className:e.jobActions,children:n.apply_link?r("a",{href:n.apply_link,target:"_blank",rel:"noreferrer",className:e.jobApplyButton,children:"Apply"}):r("span",{className:e.emptyText,children:"Apply link unavailable."})})]},n.id))}):r("p",{className:e.emptyText,children:"No vacancies returned for this query. Try changing location or disabling remote-only."})]}),r("button",{type:"button",className:e.matchingButton,onClick:()=>T(!0),children:"Find Matching Jobs ->"})]})]}),$&&ne&&a("section",{className:`${e.panel} ${e.fadeSlide}`,children:[r("h2",{className:e.panelTitle,children:"Step 3 - Job Matching Engine"}),r($e,{resume:ne})]})]})})};export{yr as default};
